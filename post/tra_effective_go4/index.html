<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">

<title>翻译: Effective Go (4) | Mr.Shentu</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/5.12.1/css/all.min.css" crossorigin="anonymous">
<link rel="shortcut icon" href="https://blog.xabc.site/favicon.ico?v=1700095858984">
<link rel="stylesheet" href="https://blog.xabc.site/styles/main.css">



<link href="https://cdn.bootcss.com/aos/3.0.0-beta.6/aos.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js">
</script>



    <meta name="description" content="本文是Effective Go的第四篇翻译，对应的章节为：Functions
第一篇翻译在这里,对应的章节为：Introduction, Formatting, Commentary.
第二篇翻译在这里,对应的章节为：Names, Semi..."/>
    <meta name="keywords" content="翻译,Golang"/>
    <link href="https://cdn.bootcss.com/tocbot/4.10.0/tocbot.css" rel="stylesheet">
</head>
<body>
<div id="app" class="main">

    <div class="sidebar" :class="{ 'full-height': menuVisible }">
    <div class="top-container" data-aos="fade-right">
        <div class="top-header-container">
            <a class="site-title-container" href="https://blog.xabc.site">
                <img src="https://blog.xabc.site/images/avatar.jpeg?v=1700095858984" class="site-logo">
                <h1 class="site-title">Mr.Shentu</h1>
            </a>
            <div class="menu-btn" @click="menuVisible = !menuVisible">
                <div class="line"></div>
            </div>
        </div>
        <div>
            
                
                    <a href="/" class="site-nav">
                        首页
                    </a>
                
            
                
                    <a href="/archives" class="site-nav">
                        归档
                    </a>
                
            
                
                    <a href="/tags" class="site-nav">
                        标签
                    </a>
                
            
                
                    <a href="/post/about" class="site-nav">
                        关于
                    </a>
                
            
        </div>
    </div>
    <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
        <div class="social-container">
            
                
            
                
            
                
            
                
            
                
            
        </div>
        <div class="site-description">
            <div>公告板</div>
            —————————————————
            <br>
            永远保持热情❤️
        </div>
        <div class="site-footer" style="padding: 20px 0">
            <div style="text-align: center;color:#939393">© 2021 申屠鹏会 版权所有<br><a href="http://www.beian.miit.gov.cn"style="color:#939393">浙ICP备2023016973号</a></div>

            <div style="width:300px;margin:0 auto; padding:5px 0;">
                <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAA8mVYSWZNTQAqAAAACAAHARIAAwAAAAEAAQAAARoABQAAAAEAAABiARsABQAAAAEAAABqASgAAwAAAAEAAgAAATEAAgAAACIAAAByATIAAgAAABQAAACUh2kABAAAAAEAAACoAAAAAAAAAEgAAAABAAAASAAAAAFBZG9iZSBQaG90b3Nob3AgQ0MgMjAxNCAoV2luZG93cykAMjAxNToxMToxMCAxNDowNDo1MAAABJAEAAIAAAAUAAAA3qABAAMAAAABAAEAAKACAAQAAAABAAAAFKADAAQAAAABAAAAFAAAAAAyMDE1OjExOjEwIDE0OjA0OjUwALd18ckAAAAJcEhZcwAACxMAAAsTAQCanBgAAAtJaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgICAgICAgICB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIgogICAgICAgICAgICB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIgogICAgICAgICAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOjgwYmNhOTg1LTRmOWItNmU0ZC05ZmM5LWU4ZjQ5MjY3ZGY0ZTwveG1wTU06SW5zdGFuY2VJRD4KICAgICAgICAgPHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD54bXAuZGlkOmQwMTdiOTRlLTk0YmQtMjY0MS04ZmY5LWJmN2EwYTM2NzdiMTwveG1wTU06T3JpZ2luYWxEb2N1bWVudElEPgogICAgICAgICA8eG1wTU06RG9jdW1lbnRJRD5hZG9iZTpkb2NpZDpwaG90b3Nob3A6ZWRkYWU4MGMtODc3MC0xMWU1LTg0OWEtYmNmZGE2MDI4ZjJlPC94bXBNTTpEb2N1bWVudElEPgogICAgICAgICA8eG1wTU06SGlzdG9yeT4KICAgICAgICAgICAgPHJkZjpTZXE+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ0MgMjAxNCAoV2luZG93cyk8L3N0RXZ0OnNvZnR3YXJlQWdlbnQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDp3aGVuPjIwMTUtMTEtMTBUMTQ6MDQ6NTArMDg6MDA8L3N0RXZ0OndoZW4+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDppbnN0YW5jZUlEPnhtcC5paWQ6ZDAxN2I5NGUtOTRiZC0yNjQxLThmZjktYmY3YTBhMzY3N2IxPC9zdEV2dDppbnN0YW5jZUlEPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPmNyZWF0ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ0MgMjAxNCAoV2luZG93cyk8L3N0RXZ0OnNvZnR3YXJlQWdlbnQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpjaGFuZ2VkPi88L3N0RXZ0OmNoYW5nZWQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDp3aGVuPjIwMTUtMTEtMTBUMTQ6MDQ6NTArMDg6MDA8L3N0RXZ0OndoZW4+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDppbnN0YW5jZUlEPnhtcC5paWQ6ODBiY2E5ODUtNGY5Yi02ZTRkLTlmYzktZThmNDkyNjdkZjRlPC9zdEV2dDppbnN0YW5jZUlEPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPnNhdmVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICA8L3JkZjpTZXE+CiAgICAgICAgIDwveG1wTU06SGlzdG9yeT4KICAgICAgICAgPHBob3Rvc2hvcDpDb2xvck1vZGU+MzwvcGhvdG9zaG9wOkNvbG9yTW9kZT4KICAgICAgICAgPHBob3Rvc2hvcDpJQ0NQcm9maWxlPnNSR0IgSUVDNjE5NjYtMi4xPC9waG90b3Nob3A6SUNDUHJvZmlsZT4KICAgICAgICAgPHBob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4KICAgICAgICAgICAgPHJkZjpCYWc+CiAgICAgICAgICAgICAgIDxyZGY6bGk+M0NCOEZFRThDMkVCRTZFNUE0REE5NzMyODM1NDEyNEU8L3JkZjpsaT4KICAgICAgICAgICAgICAgPHJkZjpsaT5hZG9iZTpkb2NpZDpwaG90b3Nob3A6YmRkZmNmNmYtODc3MC0xMWU1LTg0OWEtYmNmZGE2MDI4ZjJlPC9yZGY6bGk+CiAgICAgICAgICAgIDwvcmRmOkJhZz4KICAgICAgICAgPC9waG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+CiAgICAgICAgIDxleGlmOlBpeGVsWERpbWVuc2lvbj4yMDwvZXhpZjpQaXhlbFhEaW1lbnNpb24+CiAgICAgICAgIDxleGlmOlBpeGVsWURp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">
                <a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33010602010374" style="display:inline-block;text-decoration:none;height:20px;line-height:20px;"><img src="" style="float:left;"/><p style="float:left;height:20px;line-height:20px;margin: 0px 0px 0px 5px; color:#939393;">浙公网安备 33010602010374号</p></a>
            </div>
        </div>
    </div>
</div>


    <div class="main-container">

        <nav style="text-align:right;position:fixed;top:40%;right:1%" class="js-toc show-box"></nav>


        <div class="content-container" data-aos="fade-up">

            <div class="post-detail">

                <h2 class="post-title">翻译: Effective Go (4)</h2>
                <div class="post-date">2020-03-31</div>
                

                <div class="post-content js-toc-content" v-pre>

                    <p><strong>本文是Effective Go的第四篇翻译，对应的章节为：Functions</strong><br>
第一篇翻译<a href="https://xabc.site/post/tra_effective_go">在这里</a>,对应的章节为：Introduction, Formatting, Commentary.<br>
第二篇翻译<a href="https://xabc.site/post/tra_effective_go2">在这里</a>,对应的章节为：Names, Semicolons.<br>
第三篇翻译<a href="https://xabc.site/post/tra_effective_go3">在这里</a>,对应的章节为：Control structures.<br>
第五篇翻译<a href="https://xabc.site/post/tra_effective_go5/">在这里</a>,对应的章节为：Data.<br>
第六篇翻译<a href="https://xabc.site/post/tra_effective_go6/">在这里</a>,对应的章节为：Initialization, Methods.<br>
第七篇翻译<a href="https://xabc.site/post/tra_effective_go7/">在这里</a>,对应的章节为：Interfaces and other types，The blank identifier.<br>
第八篇翻译<a href="https://xabc.site/post/tra_effective_go8/">在这里</a>,对应的章节为：Embedding.</p>
<!-- more -->
<h2 id="函数">函数</h2>
<h3 id="多返回值">多返回值</h3>
<p>Go的一个特性是函数和方法可以有多个返回值。这样可以改进C程序中一些笨拙的习惯用法：将-1和EOF的错误返回以及修改引用传参的变量(即指针)。<br>
在C中，写入操作发生的错误会由一个负数标记，并隐藏在某个不确定的位置。在Go中，写入操作可以返回写入的字节数和一个错误，类似于：<em>是的，你已经写入了一些字节，但没有完全写入，因为设备已满</em>。os包中的Write方法的函数签名是这样的：<br>
<code>func (file *File) Write(b []byte) (n int, err error)</code><br>
正如文档所写，它返回已写入的字节数，当<code>n != len(b)</code>的时候，返回一个非空的错误。这是一个通用的风格，可以参见<strong>error章节</strong>查看更多的示例。<br>
类似的方法避免了需要传递指针给返回值以访问引用的参数。下面是一个简单的函数，可从字节切片中的某个位置获取一个数字，然后返回该数字和下一个位置：</p>
<pre><code>func nextInt(b []byte, i int) (int, int) {
    for ; i &lt; len(b) &amp;&amp; !isDigit(b[i]); i++ {
    }
    x := 0
    for ; i &lt; len(b) &amp;&amp; isDigit(b[i]); i++ {
        x = x*10 + int(b[i]) - '0'
    }
    return x, i
}
</code></pre>
<p>可以用它扫描输入的切片b，来获取数字：</p>
<pre><code>for i := 0; i &lt; len(b); {
        x, i = nextInt(b, i)
        fmt.Println(x)
 }
</code></pre>
<h3 id="命名返回值">命名返回值</h3>
<p>Go函数的返回值或称返回参数可以进行命名，并像入参一样作为常规变量使用。命名后，当函数开始执行，它们会被初始化为对应类型的零值；如果函数执行不带参数的return语句，则返回参数的现值会作为返回值返回。<br>
命名不是强制性的，但它们可以让代码更短更清晰：就像文档一样，正如我们命名了nextInt的返回值参数，那我们就能很明白返回的int代表的是哪个。<br>
<code>func nextInt(b []byte, pos int) (value, nextPos int) </code><br>
由于返回值已初始化，并且return语句并没有返回值，所以可以简化，清晰化代码。下面是一个io.ReadFull的使用示例：</p>
<pre><code>func ReadFull(r Reader, buf []byte) (n int, err error) {
    for len(buf) &gt; 0 &amp;&amp; err == nil {
        var nr int
        nr, err = r.Read(buf)
        n += nr
        buf = buf[nr:]
    }
    return
}
</code></pre>
<h3 id="延迟处理函数defer">延迟处理函数(Defer)</h3>
<p>Go的defer语句会安排一个函数调用(延迟处理的函数)，defer会在函数返回之前运行。这是一种特殊但是很高效的处理方式。例如无论函数最后返回什么，都必须释放资源的情况。典型的例子就是解锁互斥锁或关闭文件。</p>
<pre><code>// Contents returns the file's contents as a string.
func Contents(filename string) (string, error) {
    f, err := os.Open(filename)
    if err != nil {
        return &quot;&quot;, err
    }
    defer f.Close()  // f.Close will run when we're finished.

    var result []byte
    buf := make([]byte, 100)
    for {
        n, err := f.Read(buf[0:])
        result = append(result, buf[0:n]...) // append is discussed later.
        if err != nil {
            if err == io.EOF {
                break
            }
            return &quot;&quot;, err  // f will be closed if we return here.
        }
    }
    return string(result), nil // f will be closed if we return here.
}
</code></pre>
<p>Close这样的延迟处理函数有两个优点。一，可以确保不会忘记去关闭文件，如果在return之前编辑close，则很容易忘记；二，这意味着close在open附近，比放置在函数的末尾要清晰得多。<br>
延迟处理函数(如果是方法，则包括接收方)的参数会在defer执行时求值，而不是在调用时候求值。除了避免担心变量在函数执行时会更改值外，这还意味着单个延迟调用可以延迟多个函数的执行。下面是一个简单的例子：</p>
<pre><code>for i := 0; i &lt; 5; i++ {
    defer fmt.Printf(&quot;%d &quot;, i)
}
</code></pre>
<p>延迟函数会按照LIFO(后入先出)的顺序执行，所以上面代码的输出结果会是：4 3 2 1 0 .一个更合理的示例是一种通过延迟函数跟踪函数执行的简单方法。我们可以编写一些简单的跟踪程序：</p>
<pre><code>func trace(s string)   { fmt.Println(&quot;entering:&quot;, s) }
func untrace(s string) { fmt.Println(&quot;leaving:&quot;, s) }

// Use them like this:
func a() {
    trace(&quot;a&quot;)
    defer untrace(&quot;a&quot;)
    // do something....
}
</code></pre>
<p>我们可以充分利用延迟函数的参数当defer执行时候调用这一特点做的更好。跟踪程序可以设置参数去取消取消跟踪。示例如下：</p>
<pre><code>func trace(s string) string {
    fmt.Println(&quot;entering:&quot;, s)
    return s
}

func un(s string) {
    fmt.Println(&quot;leaving:&quot;, s)
}

func a() {
    defer un(trace(&quot;a&quot;))
    fmt.Println(&quot;in a&quot;)
}

func b() {
    defer un(trace(&quot;b&quot;))
    fmt.Println(&quot;in b&quot;)
    a()
}

func main() {
    b()
}
</code></pre>
<p>输出</p>
<pre><code>entering: b
in b
entering: a
in a
leaving: a
leaving: b
</code></pre>
<p>对于使用其他语言进行块级资源管理的程序员来说，延迟似乎很奇特，但是它最有趣和最强大的应用正是基于它不是基于块而是基于函数的特性。在panic和recover章节会看到其他不一样的示例。</p>

                </div>
                
                    <div class="tag-container">
                        
                            <a href="https://blog.xabc.site/tag/Uo9mtBIjh/" class="tag">
                                翻译
                            </a>
                        
                            <a href="https://blog.xabc.site/tag/VKYOe3SsnR/" class="tag">
                                Golang
                            </a>
                        
                    </div>
                
                
                    <div class="next-post">
                        <div class="next">下一篇</div>
                        <a href="https://blog.xabc.site/post/tra_effective_go3/">
                            <h3 class="post-title">
                                翻译: Effective Go (3)
                            </h3>
                        </a>
                    </div>
                

                

            </div>

        </div>
    </div>
</div>
<script src="https://cdn.bootcss.com/aos/3.0.0-beta.6/aos.js"></script>
<script type="application/javascript">

    AOS.init();

    var app = new Vue({
        el: '#app',
        data: {
            menuVisible: false,
        },
    })

</script>

    <script src="https://cdn.bootcss.com/highlight.js/9.18.1/highlight.min.js"></script>
    <script>
        hljs.initHighlightingOnLoad()
    </script>

<script src="https://cdn.bootcss.com/tocbot/4.10.0/tocbot.min.js"></script>
<script>
tocbot.init({
  tocSelector: '.js-toc',
  contentSelector: '.js-toc-content',
  headingSelector: 'h1, h2, h3',
  hasInnerContainers: true,
});
const slidBox = document.createElement('div')
const hitbox = document.createElement('div')
slidBox.classList.add('slid-btn')
hitbox.classList.add('show-icon')
hitbox.classList.add('target-icon')
slidBox.appendChild(hitbox)
document.querySelector('.js-toc') && document.querySelector('.js-toc').appendChild(slidBox)
slidBox.addEventListener('click', e => {
    // document.querySelector('.slid-btn .target-icon').classList.entries()
    if (document.querySelector('.slid-btn .target-icon').classList.contains(('hide-icon'))) {
        document.querySelector('.js-toc').classList.add('show-box')
        document.querySelector('.js-toc').classList.remove('hide-box')
        document.querySelector('.slid-btn .target-icon').classList.add('show-icon')
        document.querySelector('.slid-btn .target-icon').classList.remove('hide-icon')
    } else {
        document.querySelector('.js-toc').classList.add('hide-box')
        document.querySelector('.js-toc').classList.remove('show-box')
        document.querySelector('.slid-btn .target-icon').classList.add('hide-icon')
        document.querySelector('.slid-btn .target-icon').classList.remove('show-icon')
    }
})
</script>




</body>
</html>
